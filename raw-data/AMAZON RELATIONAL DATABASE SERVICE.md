## category

aws

## titles

Amazon Relational Database Service
Amazon RDS
RDS

## description

リレーショナルデータベースを構築できる

### 既存の DB インスタンスを複製する

1. 複製したい DB インスタンスのスナップショットを取得する
1. スナップショットの復元を実行する
1. 新 DB インスタンスの名前やその他項目を設定して、保存する

- サブネットグループを間違えた場合  
  DB インスタンスと同じ VPC 内の別のサブネットグループに変更することはできない（仕様か不具合かは不明）  
  この場合、新しく DB インスタンスを作り直すか、別の VPC を作って対処するしかない

- アベイラビリティーゾーンを間違えた場合

1. マルチ AZ を ON にする
1. DB インスタンスを選択して、再起動
1. 再起動する際のオプションで、フェイルオーバーして再起動にする
1. マルチ AZ を OFF にする

### フェイルオーバー

RDS をマルチ AZ 構成で構築しておき、障害やスペックアップが発生した際に、別のアベイラビリティゾーンのインスタンスに切り替える  
切り替えた先のスレーブがマスターへと昇格する  
元に戻したい場合は、フェイルオーバーし再起動を実行すれば良い

フェイルオーバーとは反対に、手動でシステム切り替える手法をスイッチオーバーと呼ぶ
