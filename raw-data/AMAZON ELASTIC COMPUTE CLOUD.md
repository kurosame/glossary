## category

aws

## titles

Amazon Elastic Compute Cloud
Amazon EC2
EC2

## description

インスタンスと呼ばれる仮想コンピューティング環境  
AWS のほとんどのサービスと統合されている

### 既存のインスタンスを複製する

1. 複製したいインスタンスの AMI を作成（AMI から複製するため）
1. 複製したいインスタンスを選択して、アクションの「同様のものを作成」を実行
1. 作成した AMI を使って、インスタンスを作成

### Launch Templates

AMI やインスタンスタイプなどを指定した起動リクエストをテンプレート化しておく  
構造の見える化やテンプレートのバージョン管理ができるなどのメリットがある  
作ったテンプレートは Auto Scaling などで使用できる

### Auto Scaling Group

EC2 インスタンス実行数を動的に増減できる  
EC2 インスタンスを利用した HA 構成を構築するのに役に立つ  
CPU 平均使用率などをメトリクスにしたスケーリングポリシーの設定ができる

### EC2 のコスト削減

- リザーブドインスタンス  
  1 年または 3 年で年契約を結ぶ  
  Standard RI プランだと割引率が高いが、インスタンスタイプの変更が不可能  
  Convertible RI であれば、割引率が低いが、インスタンスタイプの変更が可能

- スポットインスタンス  
  市場で余っているインスタンスを入札制で利用できるため、大幅に安い価格でインスタンスを利用できる  
  ただし、市場価格が入札価格を上回ると、インスタンスが利用できなくなってしまう  
  オンデマンドインスタンスと組み合わせるなどの工夫が必要

- スポットフリート  
  条件を指定しておけば、AWS 側でスポットインスタンスの価格を監視し、条件に合ったインスタンスを自動入札してくれる  
  また、スポットインスタンスの市場価格の高騰などで、条件に合わなくなったインスタンスは自動で破棄してくれる  
  Auto Scaling にも対応している
