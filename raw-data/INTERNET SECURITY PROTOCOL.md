## category

network

## titles

Secure Sockets Layer
SSL
Transport Layer Security
TLS

## description

SSL サーバー証明書を使った暗号通信では、公開鍵暗号方式で通信を確立し、共通鍵暗号方式で実際のデータをやり取りする仕組み

### 公開鍵暗号方式（PKI）

公開鍵と秘密鍵の対となる鍵を用意して、送信側が暗号化し、受信側が復号を行う  
片方の鍵を使用して暗号化したものは、対になっているもうひとつの鍵でなければ復号できない仕組みになっている

### 共通鍵暗号方式

暗号化と復号に同じ鍵を使用する  
共通鍵で暗号化したものは、同じ共通鍵でなければ復号できない仕組みになっている

### https

https は「HTTP over SSL/TLS」の略で、SSL/TLS で暗号化し、セキュアな接続で http 通信ができるようになる  
https 通信では、SSL サーバー証明書を使用し、上記の鍵を使用した通信の暗号化に加え、サーバー認証も行う  
SSL は 3.0 までバージョンアップして、その後 TLS1.0 に名称が変わった  
TLS1.3 が一般化するまでは、TLS1.2 の危険とされている機能を排除して使うのが良い

SSL 3.0 はプロトコルの脆弱性が見つかり、具体的な攻撃方法が公開されているため、現在はほとんど使用されていない

### サーバー認証

クライアント（受信側）がこれから接続するサーバーは信頼できるサーバーかどうかのチェックを行い、  
SSL サーバー証明書を提示させて確認すること  
SSL サーバー証明書はシマンテックとかで申し込む

### 自己署名証明書（オレオレ証明書）

本来 SSL サーバー証明書の発行は以下の流れで行う

- サーバーで秘密鍵を作成
- 秘密鍵から公開鍵を作成
- 公開鍵や会社情報などを基に CSR（Certificate Signing Request）という署名要求証明書を作成
- CSR を認証局に提出し、認証局の秘密鍵で署名してもらい、SSL サーバー証明書の完成
- 認証局から証明書を受け取り、サーバーに保管する

上記を認証局を介さずにサーバーの所有者が証明書を発行することができる  
これを自己署名証明書と呼ぶ

自己署名証明書でも SSL 通信において暗号化の機能は果たせる  
しかし、盗聴が目的の悪意のあるサイトとの区別がつかない  
ただし、このサイトの所有者を知っており、悪意がないことを事前に理解していれば、問題はないだろう

自己署名証明書を使っているサイトは「信頼できるサイトではない」とブラウザで警告される
