## category

network

## titles

gRPC
Remote Procedure Call

## description

Google が開発したプロトコル  
Protocol Buffers を使ってデータをシリアライズ（データ構造を保ったまま、バイト配列に変換）して高速通信を実現する  
gRPC をサポートしている言語であれば、異なる言語間でも通信が可能  
HTTP/2 を標準でサポート

### Protocol Buffers - Protobuf

言語やプラットフォームに依存せず、構造化されたデータをシリアライズする  
テキストベースの JSON と違い、Protobuf はバイナリベース  
よってパフォーマンスは良いが、目視するにはデシリアライズする必要がある  
`.proto`ファイルに型とかのスキーマを定義できる  
Swagger の型定義などに使われている JSON Schema と同じレイヤー

### gRPC-Web

~~gRPC 対応のサーバの前にプロキシサーバ（nginx など）を立て、そこでブラウザからのリクエストを gRPC リクエストに変換する~~

~~gRPC は標準ではブラウザ上で動かせないため（2018/04/24 現在）~~  
~~gRPC-Web などのサードパーティーライブラリを使う必要がある~~  
2018/10 に gRPC-Web が正式リリースされ、ブラウザの JS から gRPC の呼び出しが可能になった  
従来はブラウザから Web サーバにリクエストを送り、Web サーバからバックエンドの gRPC を呼び出していた  
このリリースにより、ブラウザが直接 gRPC クライアントとなってバックエンドの gRPC を呼び出せるようになった  
ただし、Envoy（プロキシ）などを経由して接続する必要がある（ブラウザと gRPC の通信プロトコルが異なるため）

### Envoy

L7 プロキシ（アプリケーションレイヤーのプロキシ）  
gRPC-Web クライアントから Envoy にリクエストを送信し、Envoy が gRPC サーバーへプロキシする
