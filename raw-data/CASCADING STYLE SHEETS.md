## category

css

## titles

Cascading Style Sheets
CSS

## description

### 策定の流れ

以下の流れで策定している  
FPWD（初期草案） -> WD（草案） -> LCWD（最終草案） -> CR（勧告候補） -> PR（勧告案） -> REC（勧告）  
勧告までいけば仕様が確定しているので、ブラウザ側で実装していれば使える  
草案段階では仕様が確定していないが、勧告まで時間がかかるため、ブラウザ側で独自に実装している場合がある  
そのプロパティを使いたい場合は、ベンダープレフィックスを付ける必要がある（`-moz-`とか`-webkit-`とか）  
その後、その機能が勧告され実装されたらベンダープレフィックスは外した方が良い（実装が異なる可能性もあるため）  
もしくは、ベンダープレフィックス無しのプロパティを 1 番最後に書いておくなどの考慮をしておく  
（プロパティの CSS 適用優先度が同じ場合、1 番最後に書いたスタイルが適用されるため）

### CSS の問題

- グローバルスコープ
- 可読性・メンテナンス性の悪さ

### プリプロセッサ(Sass, Less, Stylus など)

可読性・メンテナンス性は解消された  
しかし、グローバルスコープの解決はしていない

### BEM - Block Element Modifier

セレクタの命名規約により、CSS のグローバルスコープを解決している  
ネストが深いと命名から把握が困難  
BEM ルールをチームに徹底する必要がある

### CSS in JS

JS の中に CSS を直接書く  
テンプレートリテラル形式や JSX に組み込めるのとか色々書き方がある

### CSS Modules

ローカルスコープ化された（グローバル上でユニークな）セレクタ名を生成する  
JS 側で CSS のファイルを import することによって、ビルド時にセレクタ名をグローバル上でユニークな名前に変更している

### ブラウザの速度改善のすすめ

ファーストビューで必要な CSS を抜き出し、HTML にインライン化する  
HTML の link タグによる外部 CSS ダウンロードはブラウザのレンダリングブロックをしてしまう

Lighthouse の Unused CSS rules でレンダリングブロックを起こしている外部 CSS ダウンロードを確認できる

`<link rel="preload">`を使ってファーストビューで不要な CSS を非同期でダウンロードすると良い
