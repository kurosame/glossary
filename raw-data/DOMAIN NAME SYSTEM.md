## category

network

## titles

Domain Name System
DNS

## description

ドメイン名とネット上のサーバの IP アドレスを紐付ける仕組み  
DNS がない時代は、hosts で IP アドレスとドメイン名を紐づけていた  
管理と運用が大変なので、DNS を使うようになる

### 名前解決の流れ

1. ブラウザの URL バーで実行
1. PC 内のスタブリゾルバーから DNS サーバに問い合わせる
1. 問い合わせに対して、フルサービスリゾルバー（DNS キャッシュサーバ）はキャッシュがあれば IP アドレスを返す
1. キャッシュが無ければ、フルサービスリゾルバーは、ルート DNS サーバ（世界に 13 群ある）へ問い合わせる
1. ルート DNS サーバから下層（ドメインツリー構造）に探っていく  
   例：jp -> co -> example
1. 見つかった IP アドレスをブラウザまで返す
1. ブラウザがその IP アドレスにアクセス

### CNAME

ドメイン名やホスト名のエイリアスを定義できる  
たとえば`www.example.com`に対して、`test.example.com`という別名のホストの CNAME を指定できる  
当然、www と test は同じホスト（サーバー）を指している

### 1.1.1.1

無料の DNS キャッシュサーバサービス  
Cloudflare が APNIC と提携して維持・運営を行っている  
2021 年 11 月現在、世界一応答速度の速い DNS サーバとのこと（Google 社の 8.8.8.8 より速い）
