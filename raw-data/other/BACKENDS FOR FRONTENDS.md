## category

other

## titles

Backends for Frontends
BFF

## description

Web サーバと違い、フロントエンドに特化した機能をもつサーバとして構築する  
リバースプロキシサーバと API を置いている Web アプリケーションサーバとの間に配置することが多い  
API サーバがドメインロジックを担当するのに対し、BFF は UI をサポートする機能を担当する  
異なるアプリケーションやプラットフォームで共通の API を使っている場合、以下の問題が起きやすい

- 不要な情報の取得（PC のみ必要だが、Mobile では不要など）
- 複数の API コールの発生

### ユースケース

- API Gateway  
  アプリケーションと API との間に API ゲートウェイを設けることで、  
  アプリケーションからのリクエストは 1 回で済み、  
  API ゲートウェイでレスポンスの編集することで、不要な情報の排除も出来る  
  HTTP/1.1 だと同時接続数が 6 つまでなので、効果を発揮できる

  ただし、API ゲートウェイのメンテナンス性に問題が出る可能性があるので、

  アプリケーションごとに BFF を用意してあげる（PC 用の BFF、iOS 用の BFF など）  
  （BFF はアプリケーションごとの API ゲートウェイ）

  axios の処理を BFF で書いて、API アクセスをまとめる用途でも使える

- SSR  
  BFF がサーバサイドとなり、SSR することも可能

  例：  
  初期表示は BFF で SSR を行い、  
  初回以降はクライアント側で SPA として動作させる  
  ⇒Isomorphic JavaScript

- Universal Application  
  サーバーサイドでもクライアントと同じ仕組みでレンダリングすること  
  Next.js や Nuxt.js を使えば、クライアント・サーバ両方で React もしくは Vue.js を使ってレンダリングできる
